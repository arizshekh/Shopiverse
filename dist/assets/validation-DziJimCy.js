const u=document.getElementById("form"),a=document.getElementById("firstname-input"),s=document.getElementById("email-input"),n=document.getElementById("password-input"),o=document.getElementById("repeat-password-input"),c=document.getElementById("error-message");u.addEventListener("submit",t=>{t.preventDefault(),c.innerText="",[a,s,n,o].filter(r=>r!=null).forEach(r=>r.parentElement.classList.remove("incorrect"));let e=[];if(a){if(e=d(a.value,s.value,n.value,o.value),e.length===0){window.location.href="/login.html?status=registered";return}}else if(e=m(s.value,n.value),e.length===0){const r=s.value.split("@")[0];localStorage.setItem("loggedInUser",r),window.location.href="/welcome.html?status=logged_in";return}e.length>0&&(c.innerText=e.join(". "))});function d(t,l,e,r){let i=[];return(t===""||t==null)&&(i.push("Firstname is required"),a.parentElement.classList.add("incorrect")),(l===""||l==null)&&(i.push("Email is required"),s.parentElement.classList.add("incorrect")),(e===""||e==null)&&(i.push("Password is required"),n.parentElement.classList.add("incorrect")),e.length<8&&(i.push("Password must have at least 8 characters"),n.parentElement.classList.add("incorrect")),e!==r&&(i.push("Password does not match repeated password"),n.parentElement.classList.add("incorrect"),o.parentElement.classList.add("incorrect")),i}function m(t,l){let e=[];return(t===""||t==null)&&(e.push("Email is required"),s.parentElement.classList.add("incorrect")),(l===""||l==null)&&(e.push("Password is required"),n.parentElement.classList.add("incorrect")),e}const p=[a,s,n,o].filter(t=>t!=null);p.forEach(t=>{t.addEventListener("input",()=>{t.parentElement.classList.contains("incorrect")&&(t.parentElement.classList.remove("incorrect"),c.innerText="")})});
